var give_global_vars,Give_Fee_Recovery;jQuery.noConflict(),function(e){Give_Fee_Recovery={init:function(){e(".give-form-wrap").each(function(){var a=e(this).find(".give-form"),i=a.find(".give-fee-disable").val(),n=!!parseInt(i),t=a.find("input.give-gateway:radio:checked").val(),f=a.find('input[name="give-amount"]').val();e(this).find(".give-fee-message").hide(),n&&e(this).find(".give-fee-message").show(),n&&Give_Fee_Recovery.give_fee_update(a,!0,f,t)})},give_fee_update:function(e,a,i,n){var t=e.find(".give-final-total-amount"),f=e.find(".give-fee-message-label-text"),o=e.find(".fee-break-down-message"),v=o.data("breakdowntext"),d=e.find(".give_fee_mode_checkbox").val(),_=Give.form.fn.getInfo("decimal_separator",e),r=give_fee_unformat_amount(i,_),g=JSON.parse(e.find('input[name="give-fee-recovery-settings"]').val());if(e.has(".give_fee_mode_checkbox").length>=1&&0!==d&&"undefined"!==d&&(a=e.find(".give_fee_mode_checkbox").is(":checked")),0===e.find(".give-fee-message").length)return!1;t.show(),o.hide();var u=g.fee_recovery,m=g.fee_data.all_gateways,s=0,c=0,l=!0,p=!0,h=!1,y=0;if(u){m?(s=g.fee_data.all_gateways.base_amount,c=g.fee_data.all_gateways.percentage,l=g.fee_data.all_gateways.is_break_down,p=g.fee_data.all_gateways.give_fee_status,h=g.fee_data.all_gateways.give_fee_disable):jQuery.each(g.fee_data,function(e,a){n===e&&(s=a.base_amount,c=a.percentage,l=a.is_break_down,p=a.give_fee_status,h=a.give_fee_disable)}),y=give_fee_calculate(c,give_fee_unformat_amount(s,_),give_fee_unformat_amount(i,_),h),a&&(r+=y);var b=v.replace("{amount}",give_fee_format_amount(give_fee_unformat_amount(i,_),e)),w=b.replace("{fee_amount}",give_fee_format_amount(y,e));h?(e.find(".give-fee-recovery-donors-choice").hide(),e.find(".fee-coverage-required").hide()):(e.parent().hasClass("mfp-content")||e.find(".give-fee-recovery-donors-choice").show(),e.find(".fee-coverage-required").show()),p?(e.find('input[name="give-fee-status"]').remove(),e.prepend('<input type="hidden" name="give-fee-status" value="enabled"/>')):(e.find('input[name="give-fee-status"]').remove(),e.prepend('<input type="hidden" name="give-fee-status" value="disabled"/>')),a&&l&&"undefined"!=typeof v&&(o.show(),e.find('input[name="give-payment-mode"]').remove(),e.prepend('<input type="hidden" name="give-payment-mode" value="'+n+'"/>'),o.text(w));var k=e.find(".give-fee-message-label").data("feemessage"),x=k.replace("{fee_amount}",give_fee_format_amount(y,e));f.text(x);var G;G="undefined"!=typeof give_global_vars?give_global_vars.number_decimals:give_vars.currency_decimals,1>=parseInt(G)&&(G=2),setTimeout(function(){t.text(give_fee_format_amount(r,e)).attr("data-total",Give.fn.formatCurrency(r,{precision:G},e))},0),e.find('input[name="give-fee-mode-enable"]').remove(),e.prepend('<input type="hidden" name="give-fee-mode-enable" value="'+a+'"/>'),e.find('input[name="give-fee-amount"]').remove(),e.prepend('<input type="hidden" name="give-fee-amount" value="'+give_fee_unformat_amount(give_fee_format_amount(y,e),_)+'"/>')}else e.find('input[name="give-fee-status"]').remove(),e.prepend('<input type="hidden" name="give-fee-status" value="disabled"/>')}},e(function(){var a=e("body");a.on("change",".give_fee_mode_checkbox",function(){var a=e(this).closest("form.give-form"),i=e(this).is(":checked"),n=a.find("input.give-gateway:radio:checked").val(),t=a.find('input[name="give-amount"]').val();Give_Fee_Recovery.give_fee_update(a,i,t,n)}).change(),e(document).on("give_donation_value_updated",function(a,i,n){i||(i=e(this).closest("form.give-form"));var t=i.find("input.give-gateway:radio:checked").val(),f="undefined"==typeof n?i.find('input[name="give-amount"]').val():n;Give_Fee_Recovery.give_fee_update(i,!0,f,t)}),e(document).on("give_gateway_loaded",function(a,i,n){var t=e(a.currentTarget.activeElement).closest("form.give-form");0===t.length&&(t=e("#"+n));var f=t.find('li.give-gateway-option-selected input[name="payment-mode"]').val(),o=t.find('input[name="give-amount"]').val();Give_Fee_Recovery.give_fee_update(t,!0,o,f)}),Give_Fee_Recovery.init()})}(jQuery);